<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-project-setup/run-local-server-database">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<link rel="alternate" type="application/rss+xml" href="/full-stack-next-tutorial/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/full-stack-next-tutorial/blog/atom.xml" title="My Site Atom Feed"><title data-rh="true">Run Local Server and Database | My Site</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://lbsonley.github.io//full-stack-next-tutorial/docs/project-setup/run-local-server-database"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Run Local Server and Database | My Site"><meta data-rh="true" name="description" content="The repository is setup to run our Apollo GraphQL Server and Postgres database in a docker container for local development."><meta data-rh="true" property="og:description" content="The repository is setup to run our Apollo GraphQL Server and Postgres database in a docker container for local development."><link data-rh="true" rel="icon" href="/full-stack-next-tutorial/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://lbsonley.github.io//full-stack-next-tutorial/docs/project-setup/run-local-server-database"><link data-rh="true" rel="alternate" href="https://lbsonley.github.io//full-stack-next-tutorial/docs/project-setup/run-local-server-database" hreflang="en"><link data-rh="true" rel="alternate" href="https://lbsonley.github.io//full-stack-next-tutorial/docs/project-setup/run-local-server-database" hreflang="x-default"><link rel="stylesheet" href="/full-stack-next-tutorial/assets/css/styles.f4626bd2.css">
<link rel="preload" href="/full-stack-next-tutorial/assets/js/runtime~main.9a9356af.js" as="script">
<link rel="preload" href="/full-stack-next-tutorial/assets/js/main.a7069790.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/full-stack-next-tutorial/"><div class="navbar__logo"><img src="/full-stack-next-tutorial/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/full-stack-next-tutorial/img/logo.svg" alt="My Site Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">My Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/full-stack-next-tutorial/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/full-stack-next-tutorial/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/full-stack-next-tutorial/docs/intro">Workshop Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/full-stack-next-tutorial/docs/project-setup/getting-started">Project Setup</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/full-stack-next-tutorial/docs/project-setup/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/full-stack-next-tutorial/docs/project-setup/backend-orientation">Backend Orientation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/full-stack-next-tutorial/docs/project-setup/run-local-server-database">Run Local Server and Database</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/full-stack-next-tutorial/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Project Setup</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Run Local Server and Database</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Run Local Server and Database</h1><p>The repository is setup to run our Apollo GraphQL Server and Postgres database in a docker container for local development.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="dockerfile-and-docker-composeyml">Dockerfile and docker-compose.yml<a class="hash-link" href="#dockerfile-and-docker-composeyml" title="Direct link to heading">‚Äã</a></h2><p>Before we run Docker, let&#x27;s take a look at the <code>Dockerfile</code> and <code>docker-compose.yml</code> to get a sense of what going on.</p><p>TODO -&gt; Explain Docker configs</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="start-docker-container">Start Docker Container<a class="hash-link" href="#start-docker-container" title="Direct link to heading">‚Äã</a></h2><p>To start the docker container, open a terminal in the <code>backend</code> directory of the repository and run the following commands.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># build the docker container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># run the docker container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker-compose up -d</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The first time you start the docker containers, the databases will be empty. There are a couple of steps you need to take to apply the Prisma Schema to the database. First, you will need to create tables on the database for each model. Next, you will want to fill the database with some sample data.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="apply-database-migrations">Apply Database Migrations<a class="hash-link" href="#apply-database-migrations" title="Direct link to heading">‚Äã</a></h3><p>Up until now, we have not really interacted with our Database. In fact, we haven&#x27;t even had a running database. But now that our database is running inside of Docker, we can start adding data.</p><p>To do this, open a terminal inside of the &quot;server&quot; docker container.</p><p><img loading="lazy" alt="open terminal in docker container" src="/full-stack-next-tutorial/assets/images/docker-container-terminal-478b961e58f8b0e4d4bf83bd93336e2e.png" width="2326" height="1424" class="img_E7b_"></p><p>Once inside the container, run the command to create tables defined in the prisma schema on the database:</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">yarn prisma migrate deploy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This should have created the <code>Users</code> tables on the database.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="seed-prisma-database">Seed Prisma Database<a class="hash-link" href="#seed-prisma-database" title="Direct link to heading">‚Äã</a></h3><p>Now that the <code>Users</code> tables exists. We can add some sample data to our database. Prisma comes with a <code>db seed</code> command that does exactly that. Inside of the server container terminal, run the command to add the seed data.</p><div class="codeBlockContainer_I0IT language-sh theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-sh codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">yarn prisma db seed</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>This command will look inside of <code>backend/package.json</code> for a <code>prisma.seed</code> property and execute the command defined there. Our <code>package.json</code> defines this command as <code>ts-node prisma/seed/index.ts</code>.</p><p>If we take a look inside of that file, we will see that we import some sample data from <code>prisma/seed/data/users.ts</code>. We also create a Prisma Client instance. We then loop through that data, calling <code>prisma.user.create()</code> for each user.</p><p>For more information about seeding data, see the <a href="https://www.prisma.io/docs/guides/database/seed-database" target="_blank" rel="noopener noreferrer">Prisma Seed Docs</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="explore-dev-tools">Explore Dev Tools<a class="hash-link" href="#explore-dev-tools" title="Direct link to heading">‚Äã</a></h2><p>Apollo Server comes with its own API explorer called Apollo Studio. You can see it by opening <a href="http://localhost:4000/graphql" target="_blank" rel="noopener noreferrer">http://localhost:4000/graphql</a> in your browser.</p><p><img loading="lazy" alt="Apollo Studio screenshot" src="/full-stack-next-tutorial/assets/images/apollo-studio-a6e34fcf6774d3b631888d0303ece676.png" width="3172" height="2354" class="img_E7b_"></p><p>Prisma also comes with its own database explorer tool called Prisma Studio. You can see it by opening <a href="http://localhost:5555" target="_blank" rel="noopener noreferrer">http://localhost:5555</a> in your browser.</p><p><img loading="lazy" alt="Prisma Studio screenshot" src="/full-stack-next-tutorial/assets/images/prisma-studio-bfd920f53ad82dc92b38adc218600055.png" width="2784" height="1576" class="img_E7b_"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_XVD_ padding--none margin-left--sm"><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/full-stack-next-tutorial/docs/tags/docker">docker</a></li><li class="tag_JSN8"><a class="tag_hD8n tagRegular_D6E_" href="/full-stack-next-tutorial/docs/tags/prisma">prisma</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/lbsonley/full-stack-next-tutorial/docs/project-setup/run-local-server-database.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/full-stack-next-tutorial/docs/project-setup/backend-orientation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Backend Orientation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dockerfile-and-docker-composeyml" class="table-of-contents__link toc-highlight">Dockerfile and docker-compose.yml</a></li><li><a href="#start-docker-container" class="table-of-contents__link toc-highlight">Start Docker Container</a><ul><li><a href="#apply-database-migrations" class="table-of-contents__link toc-highlight">Apply Database Migrations</a></li><li><a href="#seed-prisma-database" class="table-of-contents__link toc-highlight">Seed Prisma Database</a></li></ul></li><li><a href="#explore-dev-tools" class="table-of-contents__link toc-highlight">Explore Dev Tools</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/full-stack-next-tutorial/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/full-stack-next-tutorial/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/full-stack-next-tutorial/assets/js/runtime~main.9a9356af.js"></script>
<script src="/full-stack-next-tutorial/assets/js/main.a7069790.js"></script>
</body>
</html>